{"version":3,"sources":["webpack:///./examples/dynamic.js","webpack:///./examples/util.js"],"names":["Demo","state","treeData","label","value","key","isLeaf","onChange","console","log","setState","onLoadData","treeNode","Promise","resolve","setTimeout","getNewTreeData","props","eventKey","generateTreeNodes","render","padding","width","React","Component","propTypes","ReactDOM","document","getElementById","generateData","x","y","z","gData","_loop","_level","_preKey","_tns","preKey","tns","children","i","push","disabled","__level","forEach","index","calcTotal","rec","n","Math","pow","arr","setLeaf","curKey","level","loopLeaf","data","lev","l","item","length","indexOf","child","loop","loopData","callback","d","pos","isPositionPrefix","smallPos","bigPos","charAt","substr","getFilterValue","val","sVal","delVal","allPos","delPos","newPos","newVal"],"mappings":"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","file":"examples/dynamic.js","sourcesContent":["/* eslint react/no-multi-comp:0, no-console:0 */\n\nimport 'rc-tree-select/assets/index.less';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport TreeSelect from 'rc-tree-select';\nimport { getNewTreeData, generateTreeNodes } from './util';\n\nclass Demo extends React.Component {\n  static propTypes = {};\n\n  state = {\n    treeData: [\n      { label: 'pNode 01', value: '0-0', key: '0-0' },\n      { label: 'pNode 02', value: '0-1', key: '0-1' },\n      { label: 'pNode 03', value: '0-2', key: '0-2', isLeaf: true },\n    ],\n    // value: '0-0',\n    value: { value: '0-0-0-value', label: '0-0-0-label' },\n  };\n\n  onChange = (value) => {\n    console.log(value);\n    this.setState({\n      value,\n    });\n  };\n\n  onLoadData = (treeNode) => {\n    console.log(treeNode);\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        const treeData = [...this.state.treeData];\n        getNewTreeData(treeData, treeNode.props.eventKey, generateTreeNodes(treeNode), 2);\n        this.setState({ treeData });\n        resolve();\n      }, 500);\n    });\n  };\n\n  render() {\n    return (\n      <div style={{ padding: '10px 30px' }}>\n        <h2>dynamic render</h2>\n        <TreeSelect\n          style={{ width: 300 }}\n          treeData={this.state.treeData}\n          labelInValue\n          value={this.state.value}\n          onChange={this.onChange}\n          loadData={this.onLoadData}\n        />\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<Demo />, document.getElementById('__react-content'));\n\n\n\n// WEBPACK FOOTER //\n// ./examples/dynamic.js","/* eslint no-loop-func: 0, no-console: 0 */\n\nexport function generateData(x = 3, y = 2, z = 1, gData = []) {\n  // x：每一级下的节点总数。y：每级节点里有y个节点、存在子节点。z：树的level层级数（0表示一级）\n  function _loop(_level, _preKey, _tns) {\n    const preKey = _preKey || '0';\n    const tns = _tns || gData;\n\n    const children = [];\n    for (let i = 0; i < x; i++) {\n      const key = `${preKey}-${i}`;\n      tns.push({\n        label: `${key}-label`,\n        value: `${key}-value`,\n        key,\n        disabled: key === '0-0-0-1' || false,\n      });\n      if (i < y) {\n        children.push(key);\n      }\n    }\n    if (_level < 0) {\n      return tns;\n    }\n    const __level = _level - 1;\n    children.forEach((key, index) => {\n      tns[index].children = [];\n      return _loop(__level, key, tns[index].children);\n    });\n  }\n  _loop(z);\n  return gData;\n}\nexport function calcTotal(x = 3, y = 2, z = 1) {\n  /* eslint no-param-reassign:0*/\n  const rec = (n) => n >= 0 ? x * Math.pow(y, n--) + rec(n) : 0;\n  return rec(z + 1);\n}\nconsole.log('总节点数（单个tree）：', calcTotal());\nexport const gData = generateData();\n\nexport function generateTreeNodes(treeNode) {\n  const arr = [];\n  const key = treeNode.props.eventKey;\n  for (let i = 0; i < 3; i++) {\n    arr.push({ label: `${key}-${i}-label`, value: `${key}-${i}-value`, key: `${key}-${i}` });\n  }\n  return arr;\n}\n\nfunction setLeaf(treeData, curKey, level) {\n  const loopLeaf = (data, lev) => {\n    const l = lev - 1;\n    data.forEach((item) => {\n      if ((item.key.length > curKey.length) ? item.key.indexOf(curKey) !== 0 :\n        curKey.indexOf(item.key) !== 0) {\n        return;\n      }\n      if (item.children) {\n        loopLeaf(item.children, l);\n      } else if (l < 1) {\n        item.isLeaf = true;\n      }\n    });\n  };\n  loopLeaf(treeData, level + 1);\n}\n\nexport function getNewTreeData(treeData, curKey, child, level) {\n  const loop = (data) => {\n    if (level < 1 || curKey.length - 3 > level * 2) return;\n    data.forEach((item) => {\n      if (curKey.indexOf(item.key) === 0) {\n        if (item.children) {\n          loop(item.children);\n        } else {\n          item.children = child;\n        }\n      }\n    });\n  };\n  loop(treeData);\n  setLeaf(treeData, curKey, level);\n}\n\n\nfunction loopData(data, callback) {\n  const loop = (d, level = 0) => {\n    d.forEach((item, index) => {\n      const pos = `${level}-${index}`;\n      if (item.children) {\n        loop(item.children, pos);\n      }\n      callback(item, index, pos);\n    });\n  };\n  loop(data);\n}\n\nfunction isPositionPrefix(smallPos, bigPos) {\n  if (bigPos.length < smallPos.length) {\n    return false;\n  }\n  // attention: \"0-0-1\" \"0-0-10\"\n  if ((bigPos.length > smallPos.length) && (bigPos.charAt(smallPos.length) !== '-')) {\n    return false;\n  }\n  return bigPos.substr(0, smallPos.length) === smallPos;\n}\n// console.log(isPositionPrefix(\"0-1\", \"0-10-1\"));\n\nexport function getFilterValue(val, sVal, delVal) {\n  const allPos = [];\n  const delPos = [];\n  loopData(gData, (item, index, pos) => {\n    if (sVal.indexOf(item.value) > -1) {\n      allPos.push(pos);\n    }\n    if (delVal.indexOf(item.value) > -1) {\n      delPos.push(pos);\n    }\n  });\n  const newPos = [];\n  delPos.forEach((item) => {\n    allPos.forEach((i) => {\n      if (isPositionPrefix(item, i) || isPositionPrefix(i, item)) {\n        // 过滤掉 父级节点 和 所有子节点。\n        // 因为 node节点 不选时，其 父级节点 和 所有子节点 都不选。\n        return;\n      }\n      newPos.push(i);\n    });\n  });\n  const newVal = [];\n  if (newPos.length) {\n    loopData(gData, (item, index, pos) => {\n      if (newPos.indexOf(pos) > -1) {\n        newVal.push(item.value);\n      }\n    });\n  }\n  return newVal;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./examples/util.js"],"sourceRoot":""}